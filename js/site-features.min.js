(function(){const n=document.querySelectorAll(".top-link, #top-link");n.forEach(e=>e.remove());const e=document.createElement("button");e.className="custom-back-to-top",e.innerHTML='<svg viewBox="0 0 24 24"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>',e.setAttribute("aria-label","返回顶部"),document.body.appendChild(e);function t(){window.scrollY>300?e.classList.add("visible"):e.classList.remove("visible")}e.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})}),window.addEventListener("scroll",t,{passive:!0}),t()})(),function(){const t=`<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7 14l5-5 5 5H7z"/></svg>`,n=function(e){const s=e.querySelectorAll(".ln, .line-number");if(s.length>=6)return!0;const o=e.querySelectorAll('span[style*="display:flex"]');if(o.length>=6)return!0;const t=e.querySelector("code");if(t){const e=t.textContent||"",n=e.split(`
`).length;if(n>=6)return!0}const n=e.querySelector("pre");if(n){const e=n.textContent||"",t=e.split(`
`).length;if(t>=6)return!0}const i=e.scrollHeight;return i>240},e=function(){const e=document.querySelectorAll(".post-content .highlight");e.forEach(e=>{if(!e.classList.contains("highlight"))return;if(e.querySelector(":scope > .code-fold-toggle"))return;if(!n(e))return;const s=document.createElement("button");s.className="code-fold-toggle",s.innerHTML=t,s.setAttribute("aria-label","fold code"),s.title="点击折叠/展开代码";const o=document.createElement("div");o.className="code-fold-hint",o.textContent="当前内容已折叠呐~",o.style.display="none";let i=!1;s.addEventListener("click",function(t){t.stopPropagation(),i=!i,i?(e.classList.add("code-folded"),s.classList.add("folded"),o.style.display="block",s.setAttribute("aria-label","unfold code")):(e.classList.remove("code-folded"),s.classList.remove("folded"),o.style.display="none",s.setAttribute("aria-label","fold code"))}),getComputedStyle(e).position==="static"&&(e.style.position="relative"),e.appendChild(s),e.appendChild(o)})};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e,!1):e();const s=new MutationObserver(function(){e()});s.observe(document.body,{childList:!0,subtree:!0}),window.addEventListener("load",function(){e()})}(),function(){const e=function(){const e=document.querySelectorAll('.highlight .copy-code, .chroma .copy-code, .highlight button[title="Copy"], .chroma button[title="Copy"]');e.forEach(e=>{e.style.display="none !important",e.style.visibility="hidden !important",e.style.opacity="0 !important",e.style.pointerEvents="none !important"})},t=function(){const e=document.querySelectorAll(".post-content .highlight");e.forEach(e=>{if(!e.classList.contains("highlight"))return;if(e.querySelector(":scope > .custom-copy-code"))return;const t=document.createElement("button");t.className="custom-copy-code",t.textContent="copy",t.setAttribute("aria-label","复制代码"),t.title="复制代码",t.addEventListener("click",function(n){n.stopPropagation();let s="";const o=e.querySelector("table");if(o){{const e=o.querySelector("td:last-child pre, td:last-child code");if(e){const t=e.cloneNode(!0),n=t.querySelectorAll(".ln, .line-number");n.forEach(e=>e.remove()),s=t.textContent}}}else{const t=e.querySelector("code");if(t){const e=t.cloneNode(!0),n=e.querySelectorAll('.ln, .line-number, [style*="user-select:none"]');n.forEach(e=>e.remove()),s=e.textContent}else s=e.textContent}s=s.replace(/\n\s*\n/g,`
`).trim(),navigator.clipboard.writeText(s).then(function(){t.textContent="okkk",t.classList.add("copied"),setTimeout(function(){t.textContent="copy",t.classList.remove("copied")},2e3)}).catch(function(){t.textContent="failed",setTimeout(function(){t.textContent="copy"},2e3)})}),getComputedStyle(e).position==="static"&&(e.style.position="relative"),e.appendChild(t)})};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){e(),t()},!1):(e(),t());const n=new MutationObserver(function(){e(),t()});n.observe(document.body,{childList:!0,subtree:!0}),window.addEventListener("load",function(){e(),t()})}(),function(){const e=function(){const e=document.querySelectorAll(".highlight");e.forEach(e=>{if(!e.classList.contains("highlight"))return;if(e.querySelector(":scope > .code-lang-btn"))return;const n=e.querySelector('code[class*="language-"], code[data-lang]');let o="code";if(n){const e=n.className.match(/language-(\w+)/);e?o=e[1]:n.getAttribute("data-lang")&&(o=n.getAttribute("data-lang"))}const t=document.createElement("button");t.className="code-lang-btn",t.textContent=o.toUpperCase(),t.setAttribute("aria-label","Toggle line numbers"),t.title="点击切换行号显示/隐藏";let s=!0;t.addEventListener("click",function(n){n.stopPropagation(),s=!s;const o=e.querySelectorAll(".ln, .line-number, .line-numbers");o.forEach(e=>{s?e.style.display="":e.style.display="none"}),s?t.classList.remove("line-numbers-hidden"):t.classList.add("line-numbers-hidden")}),getComputedStyle(e).position==="static"&&(e.style.position="relative"),e.appendChild(t)})};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e,!1):e();const t=new MutationObserver(function(){e()});t.observe(document.body,{childList:!0,subtree:!0}),window.addEventListener("load",function(){e()})}(),function(){const e=function(){const e=document.querySelectorAll(".highlight");e.forEach(e=>{if(e.hasAttribute("data-simplified"))return;const s=e.querySelector(":scope > .chroma");if(!s)return;const i=s.querySelector("table.lntable");if(!i)return;const o=i.querySelectorAll("pre");if(o.length!==2)return;const l=o[0],t=o[1],n=t.querySelector("code");if(!n)return;const a=l.querySelector("code");if(a){const e=document.createElement("div");e.className="line-numbers",e.style.cssText="float: left; margin-right: 10px; margin-left: -10px; text-align: right; color: rgba(0,0,0,0.25); user-select: none;",e.innerHTML=a.innerHTML,n.insertBefore(e,n.firstChild)}const d=Array.from(e.querySelectorAll(".custom-copy-code, .code-fold-toggle, .code-fold-hint, .code-lang-btn")),u=Array.from(s.querySelectorAll(".custom-copy-code, .code-fold-toggle, .code-fold-hint, .code-lang-btn")),r=Array.from(t.querySelectorAll(".custom-copy-code, .code-fold-toggle, .code-fold-hint, .code-lang-btn")),c=Array.from(n.querySelectorAll(".custom-copy-code, .code-fold-toggle, .code-fold-hint, .code-lang-btn")),h=[...new Set([...d,...u,...r,...c])];r.forEach(e=>e.remove()),c.forEach(e=>e.remove()),e.innerHTML="",t.className="chroma",t.style.backgroundColor="transparent",t.style.background="transparent",e.appendChild(t),h.forEach(t=>{t.classList.contains("code-fold-hint")&&(e.classList.contains("code-folded")?t.style.display="block":t.style.display="none"),e.appendChild(t)}),e.setAttribute("data-simplified","true")})};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){e()},!0):e();const t=new MutationObserver(function(){e()});t.observe(document.body,{childList:!0,subtree:!0}),window.addEventListener("load",function(){e()})}(),function(){const n="force-remove-black-bg";let e=document.getElementById(n);e||(e=document.createElement("style"),e.id=n,e.textContent=`
      /* 强制内部元素透明背景，不影响主题 */
      .post-content .chroma,
      .post-content pre.chroma,
      .post-content .highlight pre,
      .post-content .highlight pre.chroma,
      .post-content .highlight code,
      .post-content .chroma code,
      .post-content .highlight span,
      .post-content .chroma span,
      .post-content .highlight div,
      .post-content .chroma div {
        background-color: transparent !important;
        background: transparent !important;
      }
    `,document.head.appendChild(e));const t=function(){const e=document.querySelectorAll(".post-content .highlight *");e.forEach(e=>{e.style.removeProperty("background"),e.style.removeProperty("background-color"),e.style.backgroundColor="transparent",e.style.background="transparent"});const t=document.querySelectorAll(".post-content .chroma, .post-content pre.chroma");t.forEach(e=>{e.style.removeProperty("background"),e.style.removeProperty("background-color"),e.style.backgroundColor="transparent",e.style.background="transparent"})};t(),document.readyState==="loading"&&document.addEventListener("DOMContentLoaded",t);const s=new MutationObserver(t);s.observe(document.body,{childList:!0,subtree:!0}),window.addEventListener("load",t),setInterval(t,100)}(),function(){const e=function(){const e=document.querySelectorAll(".post-content table");e.forEach(e=>{if(e.hasAttribute("data-table-processed"))return;const t=e.scrollWidth,n=e.parentElement.clientWidth;if(t>n){const t=document.createElement("div");t.className="table-scroll-wrapper",t.style.cssText=`
          width: 100%;
          overflow-x: auto;
          overflow-y: hidden;
          -webkit-overflow-scrolling: touch;
          border-radius: 12px;
          box-shadow: 0 4px 15px rgba(232, 74, 122, 0.08);
          margin: 25px 0;
        `,e.style.cssText=`
          width: auto;
          min-width: 100%;
          margin: 0;
          box-shadow: none;
          border-radius: 0;
        `,e.parentNode.insertBefore(t,e),t.appendChild(e);const n=document.documentElement.getAttribute("data-theme")==="dark"||document.documentElement.getAttribute("data-theme")==="auto"&&window.matchMedia("(prefers-color-scheme: dark)").matches;n&&(t.style.boxShadow="0 4px 15px rgba(0, 0, 0, 0.3)")}else e.style.margin="25px auto",e.style.display="table";e.setAttribute("data-table-processed","true")})};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e();const s=new MutationObserver(function(){e()});s.observe(document.body,{childList:!0,subtree:!0});let t;window.addEventListener("resize",function(){clearTimeout(t),t=setTimeout(function(){document.querySelectorAll(".post-content table[data-table-processed]").forEach(e=>{e.removeAttribute("data-table-processed")}),e()},250)});const n=function(){const e=document.documentElement.getAttribute("data-theme")==="dark"||document.documentElement.getAttribute("data-theme")==="auto"&&window.matchMedia("(prefers-color-scheme: dark)").matches;document.querySelectorAll(".table-scroll-wrapper").forEach(t=>{e?t.style.boxShadow="0 4px 15px rgba(0, 0, 0, 0.3)":t.style.boxShadow="0 4px 15px rgba(232, 74, 122, 0.08)"})},o=new MutationObserver(n);o.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",n)}()