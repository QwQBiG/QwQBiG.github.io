{{- define "main" -}}

<div class="main-container">
    <div class="main-left">
        {{- if .Site.Params.homeInfoParams -}}
            {{- partial "home_info.html" . -}}
        {{- end -}}

        <div class="posts-list">
            {{/* 第一步：先把所有文章找出来 */}}
            {{ $pages := where .Site.RegularPages "Type" "in" .Site.Params.mainSections }}

            {{/* 第二步：单独处理置顶文章 */}}
            {{ range where $pages ".Params.pin" "==" true }}
                {{/* 对于置顶文章，使用我们的专属卡片 */}}
                {{ partial "series_overview_card.html" . }}
            {{ end }}

            {{/* 第三步：处理所有“非置顶”的普通文章 */}}
            {{ $regular_pages := where $pages ".Params.pin" "!=" true }}
            {{ $paginator := .Paginate $regular_pages }}
            {{ range $paginator.Pages }}
                {{/* 对于普通文章，使用主题默认的摘要卡片 */}}
                {{ .Render "summary" }}
            {{ end }}
        </div>

        {{- template "_internal/pagination.html" . -}}
    </div>
</div>

{{- end }}{{/* end main */ -}}