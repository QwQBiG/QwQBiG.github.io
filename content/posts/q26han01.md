---
title: "再一次梦开始的地方——ESP-32点灯"
date: 2026-1-21T12:00:00+08:00
tags: ["嵌入式", "ESP-32","点灯"]
categories: ["嵌入式"]
series: ["成就-来硬的"]
---

> 2026 寒假 任务01 “我现在手头有 ESP32-WROOM-32 开发板，使用 VS Code。请教我安装 PlatformIO 插件，并创建一个 Arduino 框架的 C++ 项目。给我一段简单的 Blink 代码，解释 setup() 和 loop() 的作用，并告诉我如何将代码烧录进板子。”

---

## 第一步：安装 PlatformIO 插件

1.  **打开 VS Code**。
2.  点击左侧边栏的 **扩展图标** (`Extensions`)，或按下快捷键 `Ctrl+Shift+X`。
3.  在搜索框中输入 **`PlatformIO IDE`**。
4.  选择由 **PlatformIO** 发布的插件（图标为蚂蚁头像），点击 **`Install`**。
5.  **注意**：安装完成后，右下角通常会提示“Installing PlatformIO Core...”。请耐心等待其安装完成并提示“Reload”（重启 VS Code）。此过程可能需要几分钟。

---

## 第二步：创建新项目

1.  插件安装成功后，VS Code 左侧边栏会出现一个 **PlatformIO 图标**（蚂蚁）。点击它。
2.  在打开的 PlatformIO 主页中，点击 **`New Project`** 按钮。
3.  配置新项目：
    *   **Name**：输入项目名称，例如 `ESP32_Blink`（建议不要使用中文或空格）。
    *   **Board**：在搜索框输入 `DOIT ESP32`，通常选择 **`DOIT ESP32 DEVKIT V1`**。这是 ESP32-WROOM-32 最常见的通用配置。
    *   **Framework**：选择 **`Arduino`**。
4.  点击 **`Finish`**。
5.  首次创建项目时，PlatformIO 会自动下载 ESP32 的编译工具链和库文件。请保持网络通畅，耐心等待下载完成。

---

## 第三步：编写 Blink 代码

项目创建后，在 VS Code 的资源管理器（Explorer）中：

1.  展开项目文件夹。
2.  进入 `src` 文件夹。
3.  打开 `main.cpp` 文件（这是主程序文件）。
4.  删除文件中的默认内容，粘贴以下代码：

```cpp
#include <Arduino.h>

// ESP32 开发板的板载 LED 通常连接在 GPIO 2。
// 如果你的板子不亮，请查阅具体板子的原理图（可能连接在引脚 1 或其他引脚）。
#define LED_PIN 2 

// setup() 函数：初始化设置
// 此函数在板子上电或复位后，仅运行一次。
void setup()
{
  // 将 LED 引脚设置为输出模式，以便控制其电平高低。
  pinMode(LED_PIN, OUTPUT);
}

// loop() 函数：主循环
// setup() 执行完毕后，程序会不断重复执行此函数内的代码。
void loop()
{
  digitalWrite(LED_PIN, HIGH);  // 输出高电平，点亮 LED
  delay(1000);                  // 等待 1000 毫秒（1秒）
  
  digitalWrite(LED_PIN, LOW);   // 输出低电平，熄灭 LED
  delay(1000);                  // 等待 1000 毫秒（1秒）
}
```
## 代码原理解释

**setup()**：如同程序的“准备工作阶段”。仅在开始时执行一次，用于配置硬件初始状态。例如，本示例中我们初始化 GPIO 2 为输出模式。

**loop()**：程序的主循环。在 setup() 完成后，会永远循环执行其中的代码。本示例中，它实现了 LED 亮灭的交替循环。

## 第四步：编译与烧录（上传）

### 硬件连接
1. 使用 USB 数据线将 ESP32 开发板连接到电脑。
2. **连接检查**：确保电脑已安装正确的 USB 转串口驱动（如 CP210x 或 CH340）。如果电脑无法识别设备，请前往制造商官网下载并安装对应驱动。

### 在 PlatformIO 中操作
PlatformIO 的主要操作按钮位于 VS Code 窗口底部的蓝色/紫色状态栏。

1. **编译**：点击状态栏上的 **对号图标 (✓)**（或称为 Build）。此操作会检查代码语法并编译生成可执行文件。终端窗口显示 SUCCESS 表示编译成功。
2. **烧录（上传）**：点击状态栏上的 **右箭头图标 (→)**（或称为 Upload）。此操作会将编译好的程序上传（烧录）到 ESP32 开发板。

### ⚠️ 常见问题：上传时卡在“Connecting...”
点击上传后，如果终端长时间显示 `Connecting........_____.....` 且无进展：

1. 按住开发板上的 **BOOT** 按钮不放。
2. 点击 VS Code 中的上传按钮。
3. 等待终端出现“Writing”或“Downloading”等进度条开始走动的提示。
4. 松开 **BOOT** 按钮。

> **注意**：此操作是因为部分 ESP32 开发板需要手动进入下载模式。

## 验证结果

当底部终端显示 `[SUCCESS]` 且进度条完成时，ESP32 开发板会自动复位并开始运行新程序。

此时，您应该能看到开发板上的 **板载 LED（通常是蓝色或红色）** 开始以 **1秒亮、1秒灭** 的节奏持续闪烁。

**恭喜！我们已成功完成 ESP32 的“Hello World”项目。**